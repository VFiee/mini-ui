{"version":3,"file":"index.js","sources":["../../../packages/components/appbar/index.tsx"],"sourcesContent":["import React from \"react\";\nimport { CoverView } from \"@tarojs/components\";\nimport Icon from \"components/icon\";\nimport { useMenuButton } from \"hooks\";\nimport { getCurrPages, goToHome, navigateBack, mergeStyle } from \"utils\";\nimport {\n  IconProps,\n  TitleProps,\n  NavigationBarProps,\n  leftIconProps,\n  RightIconProps,\n  navigationBarTextStyle,\n} from \"types\";\n// 图片\nimport BackBlack from \"../../assets/images/back-black-icon.png\";\nimport BackWhite from \"../../assets/images/back-white-icon.png\";\nimport HomeBlack from \"../../assets/images/home-black-icon.png\";\nimport HomeWhite from \"../../assets/images/home-white-icon.png\";\nimport MenuBlack from \"../../assets/images/menu-black-icon.png\";\nimport MenuWhite from \"../../assets/images/menu-white-icon.png\";\n\nconst getTitleProps = (props: string | TitleProps): TitleProps => {\n  return typeof props === \"string\" ? { text: props } : props;\n};\nconst defaultHomeIconProps = {\n  isCover: true,\n  localImage: true,\n  style: {\n    width: \"34rpx\",\n    height: \"34rpx\",\n  },\n};\nconst defaultBackIconProps = {\n  isCover: true,\n  localImage: true,\n  style: {\n    width: \"18rpx\",\n    height: \"30rpx\",\n  },\n};\nconst defaultMenuIconProps = {\n  isCover: true,\n  localImage: true,\n  style: {\n    width: \"34rpx\",\n    height: \"25rpx\",\n  },\n};\nconst defaultNavigationBarProps: NavigationBarProps = {\n  title: \"微信\",\n  type: \"white\",\n  backgroundColor: \"#ffffff\",\n  // statusBarBackgroundColor: \"#ffffff\",\n  left: {\n    home: {\n      white: {\n        ...defaultHomeIconProps,\n        type: HomeWhite,\n      },\n      black: {\n        ...defaultHomeIconProps,\n        type: HomeBlack,\n      },\n    },\n    back: {\n      white: {\n        ...defaultBackIconProps,\n        type: BackWhite,\n      },\n      black: {\n        ...defaultBackIconProps,\n        type: BackBlack,\n      },\n    },\n  },\n  right: {\n    menu: {\n      white: {\n        ...defaultMenuIconProps,\n        type: MenuWhite,\n      },\n      black: {\n        ...defaultMenuIconProps,\n        type: MenuBlack,\n      },\n    },\n  },\n  onLeftClick: ({ isHome }) => {\n    isHome ? goToHome() : navigateBack();\n  },\n};\n\nconst AppBar = (props: NavigationBarProps) => {\n  const {\n    type,\n    title,\n    left,\n    right,\n    middle,\n    backgroundColor,\n    onTitleClick,\n    onLeftClick,\n    onRightClick,\n    // statusBarBackgroundColor,\n  } = {\n    ...defaultNavigationBarProps,\n    ...props,\n  };\n  const { rect, wrapStyle, menuStyle, delimiterStyle } = useMenuButton({\n    type: type as navigationBarTextStyle,\n  });\n  const { width, height } = menuStyle;\n  const { position, zIndex, ...restProps } = wrapStyle;\n  let { isFirst: isHome, isTabBar } = getCurrPages();\n  const {\n    text,\n    style: titleStyle,\n    className: titleCls,\n    ...restTitleProps\n  } = getTitleProps(title || {});\n  const {\n    home,\n    back,\n    className: leftCls,\n    ...restLeftProps\n  } = left as leftIconProps;\n  const {\n    menu,\n    className: rightCls,\n    ...restRightProps\n  } = right as RightIconProps;\n  const { className: delimiterCls, style: delimiterSty } = (middle ??\n    {}) as TitleProps;\n  const leftIconProps = isHome ? home : back;\n  const menuClickProps = { isHome, menuStyle, rect, props: left };\n  return (\n    <React.Fragment>\n      <CoverView\n        style={{\n          ...wrapStyle,\n          backgroundColor,\n        }}\n        className=\"__appbar__\"\n      >\n        <CoverView\n          style={menuStyle}\n          className={`__left__menu__ ${\n            isTabBar ? \"__left__menu__hidden__\" : \"\"\n          }`}\n        >\n          <CoverView\n            {...restLeftProps}\n            className={`__menu__item__wrap__ ${leftCls ?? \"\"}`}\n            onClick={(eve) => onLeftClick?.(menuClickProps, eve)}\n          >\n            <Icon\n              {...(leftIconProps?.[\n                type as navigationBarTextStyle\n              ] as IconProps)}\n            />\n          </CoverView>\n          <CoverView\n            className={`__delimiter__ ${delimiterCls ?? \"\"}`}\n            style={mergeStyle(delimiterStyle, delimiterSty)}\n          />\n          <CoverView\n            {...restRightProps}\n            className={`__menu__item__wrap__ ${rightCls ?? \"\"}`}\n            onClick={(eve) => onRightClick?.(menuClickProps, eve)}\n          >\n            <Icon {...(menu?.[type as navigationBarTextStyle] as IconProps)} />\n          </CoverView>\n        </CoverView>\n        <CoverView\n          {...restTitleProps}\n          className={`__appbar__title__ ${titleCls ?? \"\"}`}\n          style={mergeStyle(\n            {\n              color: backgroundColor === \"#ffffff\" ? \"#333\" : \"#fff\",\n            },\n            titleStyle\n          )}\n          onClick={(eve) => onTitleClick?.(eve)}\n        >\n          {text}\n        </CoverView>\n        <CoverView\n          style={{ width, height }}\n          className={`__right__menu__ ${\n            isTabBar ? \"__right__menu__hidden__\" : \"\"\n          }`}\n        />\n      </CoverView>\n      <CoverView style={restProps} />\n    </React.Fragment>\n  );\n};\n\nAppBar.options = {\n  addGlobalClass: true,\n};\n\nexport default AppBar;\n"],"names":[],"mappings":"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"}