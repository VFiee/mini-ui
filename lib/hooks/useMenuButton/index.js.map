{"version":3,"file":"index.js","sources":["../../../packages/hooks/useMenuButton/index.ts"],"sourcesContent":["import { useRef, useState } from \"react\";\nimport { getMenuButtonBoundingClientRect, get } from \"utils\";\nimport { useMount, useSystemInfo } from \"hooks\";\nimport { BaseObject, navigationBarTextStyle } from \"types\";\n\nexport declare type menuProps = {\n  type?: navigationBarTextStyle;\n};\n\nexport declare type menuData = {\n  rect: BaseObject;\n  wrapStyle: BaseObject;\n  menuStyle: BaseObject;\n  delimiterStyle: BaseObject;\n  system: Taro.getSystemInfoSync.Result;\n};\n\nconst defaultMenuProps: menuProps = {\n  type: \"white\" as navigationBarTextStyle,\n};\n\nconst defaultColors = {\n  border: {\n    black: `rgba(0,0,0,0.1)`,\n    white: `rgba(255,255,255,0.25)`,\n  },\n  background: {\n    black: \"rgba(252,252,252,0.6)\",\n    white: \"rgba(0,0,0,0.15)\",\n  },\n  delimiter: {\n    black: \"rgba(0,0,0,0.1)\",\n    white: \"rgba(255,255,255,0.3)\",\n  },\n};\n\nconst useMenuButton = (props: menuProps = {}): menuData => {\n  const { type: typeStyle } = {\n    ...defaultMenuProps,\n    ...props,\n  };\n  const rectRef = useRef(getMenuButtonBoundingClientRect());\n  const systemInfo = useSystemInfo();\n  const [style, setStyle] = useState({\n    wrapStyle: {},\n    menuStyle: {},\n    delimiterStyle: {},\n  });\n  useMount(() => {\n    const { width, height, top, right } = rectRef.current;\n    const { screenWidth, statusBarHeight } = systemInfo;\n    setStyle({\n      wrapStyle: {\n        position: \"fixed\",\n        zIndex: 1000,\n        boxSizing: \"border-box\",\n        width: screenWidth + \"px\",\n        paddingTop: statusBarHeight + \"px\",\n        paddingLeft: screenWidth - right + \"px\",\n        paddingRight: screenWidth - right + \"px\",\n        height: `${\n          height + statusBarHeight + (top - statusBarHeight + 2) * 2\n        }px`,\n      },\n      menuStyle: {\n        boxSizing: \"border-box\",\n        width: width + `px`,\n        height: height + `px`,\n        borderRadius: height / 2 + `px`,\n        borderWidth: \"1px\",\n        borderStyle: \"solid\",\n        borderColor: get(defaultColors, `border.${typeStyle}`),\n        backgroundColor: get(defaultColors, `background.${typeStyle}`),\n      },\n      delimiterStyle: {\n        width: `1px`,\n        height: \"18px\",\n        backgroundColor: get(defaultColors, `delimiter.${typeStyle}`),\n      },\n    });\n  });\n  return {\n    ...style,\n    system: systemInfo,\n    rect: rectRef.current,\n  };\n};\n\nexport default useMenuButton;\n"],"names":[],"mappings":";;;;;AAiBA,IAAM,gBAAgB,GAAc;IAClC,IAAI,EAAE,OAAiC;CACxC,CAAC;AAEF,IAAM,aAAa,GAAG;IACpB,MAAM,EAAE;QACN,KAAK,EAAE,iBAAiB;QACxB,KAAK,EAAE,wBAAwB;KAChC;IACD,UAAU,EAAE;QACV,KAAK,EAAE,uBAAuB;QAC9B,KAAK,EAAE,kBAAkB;KAC1B;IACD,SAAS,EAAE;QACT,KAAK,EAAE,iBAAiB;QACxB,KAAK,EAAE,uBAAuB;KAC/B;CACF,CAAC;IAEI,aAAa,GAAG,UAAC,KAAqB;IAArB,sBAAA,EAAA,UAAqB;IAClC,IAAM,SAAS,yBAClB,gBAAgB,GAChB,KAAK,MAFa,CAGrB;IACF,IAAM,OAAO,GAAG,MAAM,CAAC,+BAA+B,EAAE,CAAC,CAAC;IAC1D,IAAM,UAAU,GAAG,aAAa,EAAE,CAAC;IAC7B,IAAA,KAAoB,QAAQ,CAAC;QACjC,SAAS,EAAE,EAAE;QACb,SAAS,EAAE,EAAE;QACb,cAAc,EAAE,EAAE;KACnB,CAAC,EAJK,KAAK,QAAA,EAAE,QAAQ,QAIpB,CAAC;IACH,QAAQ,CAAC;QACD,IAAA,KAAgC,OAAO,CAAC,OAAO,EAA7C,KAAK,WAAA,EAAE,MAAM,YAAA,EAAE,GAAG,SAAA,EAAE,KAAK,WAAoB,CAAC;QAC9C,IAAA,WAAW,GAAsB,UAAU,YAAhC,EAAE,eAAe,GAAK,UAAU,gBAAf,CAAgB;QACpD,QAAQ,CAAC;YACP,SAAS,EAAE;gBACT,QAAQ,EAAE,OAAO;gBACjB,MAAM,EAAE,IAAI;gBACZ,SAAS,EAAE,YAAY;gBACvB,KAAK,EAAE,WAAW,GAAG,IAAI;gBACzB,UAAU,EAAE,eAAe,GAAG,IAAI;gBAClC,WAAW,EAAE,WAAW,GAAG,KAAK,GAAG,IAAI;gBACvC,YAAY,EAAE,WAAW,GAAG,KAAK,GAAG,IAAI;gBACxC,MAAM,EACJ,MAAM,GAAG,eAAe,GAAG,CAAC,GAAG,GAAG,eAAe,GAAG,CAAC,IAAI,CAAC,OACxD;aACL;YACD,SAAS,EAAE;gBACT,SAAS,EAAE,YAAY;gBACvB,KAAK,EAAE,KAAK,GAAG,IAAI;gBACnB,MAAM,EAAE,MAAM,GAAG,IAAI;gBACrB,YAAY,EAAE,MAAM,GAAG,CAAC,GAAG,IAAI;gBAC/B,WAAW,EAAE,KAAK;gBAClB,WAAW,EAAE,OAAO;gBACpB,WAAW,EAAE,GAAG,CAAC,aAAa,EAAE,YAAU,SAAW,CAAC;gBACtD,eAAe,EAAE,GAAG,CAAC,aAAa,EAAE,gBAAc,SAAW,CAAC;aAC/D;YACD,cAAc,EAAE;gBACd,KAAK,EAAE,KAAK;gBACZ,MAAM,EAAE,MAAM;gBACd,eAAe,EAAE,GAAG,CAAC,aAAa,EAAE,eAAa,SAAW,CAAC;aAC9D;SACF,CAAC,CAAC;KACJ,CAAC,CAAC;IACH,6BACK,KAAK,KACR,MAAM,EAAE,UAAU,EAClB,IAAI,EAAE,OAAO,CAAC,OAAO,IACrB;AACJ;;;;"}